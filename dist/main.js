(()=>{"use strict";const e=e=>`${(e=new Date(e)).getDate()} ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]}, ${e.getFullYear()}`,t=()=>new URL(window.location.href).search.toString().replace(/[^A-Za-z]+/g," ");class n{constructor(e,t,n,a=!1,o="low"){this.title=String(e),this.description=String(t),this.date=new Date(n),this.done=a,this.priority=o}add(){const e=[],n=JSON.parse(localStorage.getItem("groups"));let a;for(let t=0;t<n.length;t+=1)e.push(n[t].title);n[0].todos.push(this.create()),e.includes(t().trim())&&"Default"!==t().trim()&&(n.map((e=>(e.title===t().trim()&&(a=e),a))),a.todos.push(this.create())),localStorage.setItem("groups",JSON.stringify(n))}create(){const{title:e,description:t,date:n,done:a,priority:o}=this;return{title:e,description:t,date:n,done:a,priority:o}}}class a{constructor(e,t,n){this.title=String(e),this.description=String(t),this.todos=n}add(){const e=JSON.parse(localStorage.getItem("groups"));e.push(this.create()),localStorage.setItem("groups",JSON.stringify(e))}create(){const{title:e,description:t,todos:n}=this;return{title:e,description:t,todos:n}}}null!=localStorage.getItem("groups")&&void 0!==JSON.parse(localStorage.getItem("groups"))[0]&&0!=window.localStorage.length||localStorage.setItem("groups",JSON.stringify([new a("Default","The general group where all created todos exist",[])]));const o=[],l=JSON.parse(localStorage.getItem("groups"));for(let e=0;e<l.length;e+=1)o.push(l[e].title);""!==t()&&" "!==t()||(document.getElementById("content").innerHTML="",(()=>{const e=document.getElementById("content"),t=document.getElementById("exampleModal2"),n=document.createElement("button"),o=document.createElement("i");n.className="btn btn-dark",n.id="modal-btn2",n.appendChild(o),o.className="fas fa-plus-circle fa-2x text-white";const l=document.createElement("div");l.className="modal-dialog";const d=document.createElement("div");d.className="modal-content";const c=document.createElement("div");c.className="modal-header bg-primary";const r=document.createElement("h5");r.className="modal-title text-uppercase text-white",r.innerHTML="Create a group!";const i=document.createElement("button");i.className="close";const s=document.createElement("span");s.innerHTML="&#215;",s.className="h2",i.className="btn btn-danger py-0 px-2",n.addEventListener("click",(()=>{t.style="display:block; background: #050505a8"})),i.addEventListener("click",(()=>{t.style="display:none;"}));const m=document.createElement("div");m.className="modal-body";const p=document.createElement("form"),u=document.createElement("div"),g=document.createElement("input"),h=document.createElement("LABEL");g.setAttribute("type","text"),g.className="form-control",h.innerHTML="Title:",h.className="form-label h5",u.className="mb-3";const E=document.createElement("div"),N=document.createElement("TEXTAREA"),b=document.createElement("LABEL");N.className="form-control",b.innerHTML="Description:",b.className="form-label h5",E.className="mb-3";const y=document.createElement("input");y.setAttribute("type","submit"),y.className="btn btn-primary w-100",y.style="font-weight: bolder",g.id="title",g.pattern="[A-Za-z]+",g.title="Only letters!",g.required=!0,N.id="description",N.required=!0,y.id="btn",c.appendChild(r),i.appendChild(s),c.appendChild(i),d.appendChild(c),u.appendChild(h),u.appendChild(g),p.appendChild(u),E.appendChild(b),E.appendChild(N),p.appendChild(E),p.appendChild(y),m.appendChild(p),d.appendChild(m),l.appendChild(d),t.appendChild(l),e.appendChild(n),y.addEventListener("submit",(e=>{e.preventDefault(),""!==g.value&&""!==N.value&&new a(g.value,N.value,[]).add(),window.location.reload()}))})(),(()=>{const e=document.getElementById("content");null!==localStorage.getItem("groups")&&void 0!==JSON.parse(localStorage.getItem("groups"))[0]||localStorage.setItem("groups",JSON.stringify([new a("Default","The general group where all created todos exist",[])])),JSON.parse(localStorage.getItem("groups")).map((t=>{const n=document.createElement("div");n.className="container";const a=document.createElement("div");a.className="card";const o=document.createElement("div");o.className="card-header bg-dark";const l=document.createElement("div");l.className="card-body";const d=document.createElement("div");d.className="card-footer d-flex justify-content-between align-items-center";const c=document.createElement("h3"),r=document.createElement("p"),i=document.createElement("button"),s=document.createElement("a");return i.className="ml-auto btn btn-danger",i.innerHTML="Delete",s.className="ml-auto btn btn-dark",s.innerHTML="View Group",s.href=`?=${t.title}`,s.id="view_group",c.innerHTML=t.title,c.className="text-white",r.innerHTML=`<strong>Description:</strong> <br> ${t.description}`,i.addEventListener("click",(()=>{(e=>{const t=JSON.parse(localStorage.getItem("groups"));for(let n=0;n<t.length;n+=1)e.title===t[n].title&&t.splice(n,1);localStorage.setItem("groups",JSON.stringify(t)),window.location.reload()})(t)})),d.appendChild(i),d.appendChild(s),l.appendChild(r),o.appendChild(c),a.appendChild(o),a.appendChild(l),a.appendChild(d),n.appendChild(a),e.appendChild(n),!0}))})()),o.includes(t().trim())&&(document.getElementById("content").innerHTML="",(()=>{const e=["high","med","low"],t=document.getElementById("content"),a=document.getElementById("exampleModal"),o=document.createElement("button"),l=document.createElement("i");o.className="btn btn-warning",o.id="modal-btn2",o.appendChild(l),l.className="fas fa-plus-circle fa-2x text-white";const d=document.createElement("div");d.className="modal-dialog";const c=document.createElement("div");c.className="modal-content";const r=document.createElement("div");r.className="modal-header bg-primary";const i=document.createElement("h5");i.className="modal-title text-uppercase text-white",i.innerHTML="Create a To-do!";const s=document.createElement("button");s.className="close";const m=document.createElement("span");m.innerHTML="&#215;",m.className="h2",s.className="btn btn-danger py-0 px-2",o.addEventListener("click",(()=>{a.style="display:block; background: #050505a8"})),s.addEventListener("click",(()=>{a.style="display:none;"}));const p=document.createElement("div");p.className="modal-body";const u=document.createElement("form"),g=document.createElement("div"),h=document.createElement("input"),E=document.createElement("LABEL");h.setAttribute("type","text"),h.className="form-control",E.innerHTML="Title:",E.className="form-label h5",g.className="mb-3";const N=document.createElement("div"),b=document.createElement("TEXTAREA"),y=document.createElement("LABEL");b.className="form-control",y.innerHTML="Description:",y.className="form-label h5",N.className="mb-3";const C=document.createElement("div"),f=document.createElement("input");C.className="mb-3",f.setAttribute("type","date");const S=document.createElement("SELECT"),v=document.createElement("input");v.setAttribute("type","submit"),v.className="btn btn-primary w-100",v.style="font-weight: bolder",S.className="form-select my-3",h.id="title",h.required=!0,b.id="description",b.required=!0,f.id="date",f.required=!0,S.id="priority",v.id="btn";for(let t=0;t<e.length;t+=1){const n=document.createElement("option");e[t]===e[2]&&(n.selected=!0),n.value=e[t],n.text=e[t],S.appendChild(n)}r.appendChild(i),s.appendChild(m),r.appendChild(s),c.appendChild(r),g.appendChild(E),g.appendChild(h),u.appendChild(g),N.appendChild(y),N.appendChild(b),u.appendChild(N),C.appendChild(f),u.appendChild(C),u.appendChild(S),u.appendChild(v),p.appendChild(u),c.appendChild(p),d.appendChild(c),a.appendChild(d),t.appendChild(o),v.addEventListener("click",(e=>{e.preventDefault(),""!==h.value&&""!==b.value&&new n(h.value,b.value,f.value,!1,S.value).add(),window.location.reload()}))})(),(()=>{const a=document.getElementById("content"),o=document.createElement("a");if(o.href="?=",o.innerHTML="home",o.className="position-fixed btn btn-primary px-2 m-0",o.style="top:0",0===JSON.parse(localStorage.getItem("groups"))[0].todos.length){const t=JSON.parse(localStorage.getItem("groups"));t[0].todos.push(new n("Morning mommy","Saying good morning to my beloved mother",e(new Date),!1,"high")),localStorage.setItem("groups",JSON.stringify(t))}let l=[];JSON.parse(localStorage.getItem("groups")).map((e=>(e.title===t().trim()&&(l=[...e.todos]),l))),l.forEach((n=>{const o=document.createElement("div");o.className="container";const l=document.createElement("div");l.className="card";const d=document.createElement("div");d.className="card-header";const c=document.createElement("div");c.className="card-body";const r=document.createElement("div");r.className="card-footer d-flex justify-content-between align-items-center";const i=document.createElement("h3"),s=document.createElement("p"),m=document.createElement("span"),p=document.createElement("div"),u=document.createElement("input"),g=document.createElement("LABEL"),h=document.createElement("div");u.setAttribute("type","checkbox"),u.className="form-check-input",g.innerHTML="Done:",g.className="form-label px-1";const E=document.createElement("button");E.className="ml-auto btn btn-danger",E.innerHTML="Delete",h.innerHTML=n.priority,i.innerHTML=n.title,i.className="text-white",s.innerHTML=`<strong>Description:</strong> <br> ${n.description}`,m.innerHTML=`<strong>Date: </strong> <br> ${e(n.date)}`,u.checked=n.done,"high"===h.innerHTML&&(d.className="p-3 bg-danger"),"med"===h.innerHTML&&(d.className="p-3 bg-warning"),"low"===h.innerHTML&&(d.className="p-3 bg-success"),"done"===h.innerHTML&&(d.className="p-3 bg-default",i.className="text-dark"),u.addEventListener("click",(()=>{(e=>{const t=JSON.parse(localStorage.getItem("groups")),n=JSON.parse(localStorage.getItem("priorities"));for(let a=0;a<t[0].todos.length;a+=1)if(t[0].todos[a].title===e.title){if(t[0].todos[a].done=!t[0].todos[a].done,null===localStorage.getItem("priorities")){const e=[];e.push({priority:t[0].todos[a].priority,title:t[0].todos[a].title}),localStorage.setItem("priorities",JSON.stringify(e))}n.every((e=>e.title!==t[0].todos[a].title))&&(n.push({priority:t[0].todos[a].priority,title:t[0].todos[a].title}),localStorage.setItem("priorities",JSON.stringify(n))),!0===t[0].todos[a].done&&(t[0].todos[a].priority="done");for(let e=0;e<n.length;e+=1)!1===t[0].todos[a].done&&n[e].title===t[0].todos[a].title&&(t[0].todos[a].priority=n[e].priority)}localStorage.setItem("groups",JSON.stringify(t)),window.location.reload()})(n)})),E.addEventListener("click",(()=>{(()=>{const e=JSON.parse(localStorage.getItem("groups"));for(let n=0;n<e.length;n+=1)t().trim()===e[n].title&&e[n].todos.forEach(((t,a)=>{e[n].todos.splice(a,a+1)}));localStorage.setItem("groups",JSON.stringify(e)),window.location.reload()})()})),p.appendChild(g),p.appendChild(u),r.appendChild(p),r.appendChild(E),c.appendChild(s),c.appendChild(m),d.appendChild(i),l.appendChild(d),l.appendChild(c),l.appendChild(r),o.appendChild(l),a.appendChild(o)})),document.body.appendChild(o)})())})();